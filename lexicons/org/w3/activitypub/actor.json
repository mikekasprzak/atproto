{
  "lexicon": 1,
  "id": "org.w3.activitypub.actor",
  "defs": {
    "main": {
      "type": "object",
      "required": ["id", "type"],
      "properties": {
        "@context": { "type": "ref", "ref": "org.w3.activitystreams.defs#contextType" },

        "id": { "type": "ref", "ref": "org.w3.activitystreams.properties#id" },
        "type": { "type": "ref", "ref": "org.w3.activitystreams.properties#type" },
        "atUri": { "type": "string", "format": "at-uri", "description": "AtProto identifier URI (not actually necessary)" },
        "inbox": { "type": "string", "format": "uri" },
        "outbox": { "type": "string", "format": "uri" },
        "followers": { "type": "string", "format": "uri" },
        "following": { "type": "string", "format": "uri" },
        "featured": { "type": "string", "format": "uri" },
        "featuredTags": { "type": "string", "format": "uri" },
        "preferredUsername": { "type": "string", "format": "handle" },
        "name": { "type": "ref", "ref": "org.w3.activitystreams.properties#name" },
        "summary": { "type": "string", "description": "HTML encoded profile page" },
        "url": { "type": "string", "format": "uri" },
        "published": { "type": "string", "format": "datetime" },
        "manuallyApprovesFollowers": { "type": "boolean" },
        "discoverable": { "type": "boolean" },
        "indexable": { "type": "boolean" },
        "memorial": { "type": "boolean" },
        "context": { "type": "ref", "ref": "org.w3.activitystreams.properties#context" },
        "publicKey": { "type": "ref", "ref": "#publicKey" },
        "tag": { "type": "array", "items": { "type": "ref", "ref": "#tag" } },
        "attachments": { "type": "array", "items": { "type": "string" } },
        "endpoints": { "type": "ref", "ref": "#endpoints" },
        "icon": { "type": "ref", "ref": "#mediaUrl" },
        "image": { "type": "ref", "ref": "#mediaUrl" }
      }
    },
    "publicKey": {
      "type": "object",
      "required": ["id", "owner", "publicKeyPem"],
      "properties": {
        "id": { "type": "string", "format": "uri" },
        "owner": { "type": "string", "format": "uri" },
        "publicKeyPem": { "type": "string" }
      }
    },
    "tag": {
      "type": "string"
    },
    "attachment": {
      "type": "string"
    },


    "endpointType": { "type": "ref", "ref": "org.w3.activitystreams.defs#anyURI" },

    "inbox": { "type": "ref", "ref": "#endpointType" },
    "outbox": { "type": "ref", "ref": "#endpointType" },
    "followers": { "type": "ref", "ref": "#endpointType" },
    "following": { "type": "ref", "ref": "#endpointType" },
    "liked": { "type": "ref", "ref": "#endpointType" },
    "preferredUsername": { "type": "ref", "ref": "org.w3.activitystreams.defs#string" },

    "endpoints": {
      "type": "object",
      "properties": {
        "proxyUrl": { "type": "ref", "ref": "#endpointType" },
        "oauthAuthorizationEndpoint": { "type": "ref", "ref": "#endpointType" },
        "oauthTokenEndpoint": { "type": "ref", "ref": "#endpointType" },
        "provideClientKey": { "type": "ref", "ref": "#endpointType" },
        "signClientKey": { "type": "ref", "ref": "#endpointType" },
        "sharedInbox": { "type": "ref", "ref": "#endpointType" }
      }
    },

    "mediaUrl": {
      "type": "object",
      "description":"I'm not sure this is to spec. I believe the type needs to be 'string | object', where 'string' is the url",
      "required": ["type", "mediaType", "url"],
      "properties": {
        "type": { "type": "string", "knownValues": ["Image"] },
        "mediaType": { "type": "string", "knownValues": ["image/gif", "image/jpeg", "image/png", "image/svg+xml", "image/webp"] },
        "url": { "type": "string", "format": "uri" }
      }
    }
  }
}
